% Pandoc XeLaTeX template for Supportvertrag
\documentclass[11pt]{article}
\usepackage[margin=2.2cm]{geometry}
\usepackage{graphicx}
% Optional packages (guarded to avoid missing package errors)
\IfFileExists{setspace.sty}{\usepackage{setspace}}{}
\IfFileExists{parskip.sty}{\usepackage{parskip}}{}
\usepackage{xcolor}
\usepackage{fontspec}
\usepackage[hidelinks]{hyperref}

% Fonts
\defaultfontfeatures{Ligatures=TeX,Scale=MatchLowercase}
\IfFileExists{${mainfontpath}${mainfont}}{\setmainfont[Path={${mainfontpath}}]{${mainfont}}}{\setmainfont{Helvetica}}
\IfFileExists{${mainfontpath}${boldfont}}{\newfontfamily\boldfont[Path={${mainfontpath}}]{${boldfont}}}{\newfontfamily\boldfont{Helvetica}}

% Heading styles (only if titlesec is available)
\IfFileExists{titlesec.sty}{%
	\usepackage{titlesec}
		itleformat{\section}{\normalfont\Large\bfseries}{\thesection}{0.8em}{}
		itleformat{\subsection}{\normalfont\large\bfseries}{\thesubsection}{0.6em}{}
}{}

% Colors
% Brand color from CLI (fallback 494949) using Pandoc variables
$if(brandcolor)$
	\definecolor{brand}{HTML}{$brandcolor$}
$else$
	\definecolor{brand}{HTML}{494949}
$endif$
\hypersetup{colorlinks=true,linkcolor=brand,urlcolor=brand,citecolor=brand}
% Ensure urls use the main text font style
\urlstyle{same}

% Unicode replacement handled in build.sh sanitization step

% Support for Pandoc-generated tight lists
\providecommand{\tightlist}{%
	\setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}

% Header with logo
\usepackage{fancyhdr}
\pagestyle{fancy}
\setlength{\headheight}{40pt}
\fancyhf{}
\renewcommand{\headrulewidth}{0pt}
\fancyhead{}
\fancyhead[L]{\IfFileExists{${logo}}{\includegraphics[height=1.2cm]{${logo}}}{}}
\fancyhead[R]{\begin{minipage}{8cm}\raggedleft\small
\vspace*{0.2em}% slight vertical centering tweak
$if(provideraddress)$
${provideraddress}\\
$endif$
$if(providertel)$
\href{tel:$if(providertellink)$$providertellink$$else$$providertel$$endif$}{\textcolor{brand}{$providertel$}}\\
$endif$
$if(provideremail)$
\href{mailto:$provideremail$}{\textcolor{brand}{$provideremail$}}
$endif$
\end{minipage}}
\fancyfoot[C]{\thepage}

% Title
\newcommand{\docsubtitle}{Teletext.ch Frontend (teletext-frontend)}

\begin{document}

% Customer address window (C5/C6 typical, adjust vspace as needed)
$if(customeraddress)$
\vspace*{8mm}
\noindent\begin{flushright}
\begin{minipage}{8cm}
\small ${customeraddress}
\end{minipage}
\end{flushright}
\par\vspace{10mm}
$endif$

% Title block left aligned instead of centered
\noindent{\LARGE\bfseries Supportvertrag}\\[0.25em]
\noindent{\large \docsubtitle}\\[0.5em]
\noindent{\small Stand: ${today}}

\vspace{1.0em}

$body$

\vspace{1.5em}

% Signature block (Firma im Header, daher hier nur Signatur + Name)
\vspace{1.5cm}
\noindent
\vspace{0.4cm}
\IfFileExists{${signature}}{\includegraphics[height=1.2cm]{${signature}}\\}{\\}
Tobias Hinderling\\
\small Internet Handwerk

\end{document}
